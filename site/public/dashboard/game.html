<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Game | The Star Wars Universe</title>

    <script src="../js/funcoes.js"></script>

    <link rel="icon" href="../assets/icon/favicon.ico" />
    <link rel="stylesheet" href="../css/style_news.css" />
    <link rel="stylesheet" href="../css/style_home.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
  </head>

  <body style="height: fit-content">
    <!-- <div class="progress">
        <span class="bar"></span>
    </div> -->

    <div class="noticia">
      <div class="header">
        <ul class="nav-bar">
          <li><a href="home.html">HOME</a></li>
          <li class="dropdown">
            <a href="#" class="dropbtn">HAVE FUN</a>
            <div class="dropdown-content">
              <a href="endor.html">PLANETAS</a>
              <a href="personagens.html">PERSONAGENS</a>
              <a href="filmes.html">FILMES</a>
              <a href="recomendacoes.html">RECOMENDA√á√ïES</a>
              <a href="game.html">GAME </a>
            </div>
          </li>
          <li><a href="quizzes.html">QUIZZES</a></li>
          <li>
            <img
              style="margin-top: -25px"
              width="140px"
              height="60px"
              src="../assets/imgs/logo (4).png"
              alt=""
            />
          </li>

          <li><a href="contactUs.html">CONTACT US</a></li>
          <li><a href="about.html">ABOUT</a></li>
          <li style="margin-left: -20px" id="user-li">
            <a class="li-user" href="profile.html">
              <li class="fa fa-user-o">PERFIL</li>
            </a>
          </li>
        </ul>
      </div>
      <div class="content-rec">
        <div class="banner_game"><h1>game</h1></div>
      </div>

      <div class="news" id="game_sessao">
        <div id="gifgame" class="gifgame"></div>
        <div id="game_content" class="game_content">
          <h1>game of characters</h1>
          <p>
            Vamos descobrir quantos personagens voc√™ realmente conhece da saga!
          </p>
          <p>
            Neste jogo de agilidade, voc√™ dever√° escrever a quantidade m√°xima de
            personagens que voc√™ conhece, e ao final do tempo, sua pontua√ß√£o
            ser√° exibida!
          </p>
          <button onclick="jogar()">JOGAR</button>
        </div>

        <div id="game" class="news" style="display: none">
            <div class="group_itens">
                <div class="relogio">
                    <img src="../assets/imgs/icons8-rel√≥gio-50.png" width="40px" height="40px" style="margin-right: 10px;" alt="">
                    <h1 id="counter">00:00:00</h1>
                </div>
                <div class="lembrete">
                    <p>Aten√ß√£o! Voc√™ tem <span>1 minuto </span>para digitar quantos personagens voc√™ conseguir!</p>
                    <p>Ps.: Lembre de colocar o nome e sobrenome, se necess√°rio...</p>
                </div>
                <div class="inputbuton">
                    <input type="text" id="input_personagem" placeholder="Digite Aqui o Nome do personagem!"> 
                    <button onclick="incluir()">Incluir na lista</button> 
                    <button onclick="finalizarGame()" id="naoconsigo">N√£o consigo mais pensar!</button>
                </div>
                <div class="lista_user">
                    <span id="lista_user"></span>
                </div>
            </div>
            
          
        </div>
        <div id="final_game" style="display: none;">
            <span id="result"></span>
            <button><a href="game.html">Refazer</a></button>
        </div>
      </div>
    </div>
    <div class="footer">
      <div class="footer-content">
        <div class="logo-icons">
          <img src="../assets/imgs/logo (4).png" alt="" />
          <div class="icons">
            <i style="color: white" class="fa fa-facebook"></i>
            <i style="color: white" class="fa fa-instagram"></i>
            <i style="color: white" class="fa fa-youtube"></i>
            <i style="color: white" class="fa fa-twitter"></i>
          </div>
        </div>
        <div class="footer-links">
          <div class="column">
            <h1>Institucional</h1>
            <a href="contactUs.html">Contact Us</a>
            <a href="login.html">Login</a>
            <a href="cadastro.html">Cadastro</a>
          </div>
          <div class="column">
            <h1>Have Fun!</h1>
            <a href="recomendacoes.html">Recomenda√ß√µes</a>
            <a href="quizzes.html">Quizzes</a>
            <a href="home.html">Home</a>
          </div>
          <div class="column">
            <h1>Menu</h1>
            <a href="personagens.html">Personagens</a>
            <a href="filmes.html">Filmes</a>
            <a href="endor.html">Planetas</a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

<script>
  function jogar() {
    gifgame.style.display = "none";
    game_content.style.display = "none";

    game.style.display = "flex";

    start();
  }

  ////////////////////////////////////////////////////////
  //comeco da logica do game (timer)
  ("use strict");

  var hh = 0;
  var mm = 0;
  var ss = 0;

  var tempo = 1000; //Quantos mil√©simos valem 1 segundo?
  var cron;

  //Inicia o temporizador
  function start() {
    cron = setInterval(() => {
      timer();
    }, tempo);
  }

  //Faz a contagem do tempo e exibi√ß√£o
  function timer() {
    ss++; //Incrementa +1 na vari√°vel ss

    if (ss == 60) {
      //Verifica se deu 59 segundos
      ss = 0; //Volta os segundos para 0
      mm++; //Adiciona +1 na vari√°vel mm

      if (mm == 60) {
        //Verifica se deu 59 minutos
        mm = 0; //Volta os minutos para 0
        hh++; //Adiciona +1 na vari√°vel hora
      }
    }

    //Cria uma vari√°vel com o valor tratado HH:MM:SS
    var format =
      (hh < 10 ? "0" + hh : hh) +
      ":" +
      (mm < 10 ? "0" + mm : mm) +
      ":" +
      (ss < 10 ? "0" + ss : ss);

    //Insere o valor tratado no elemento counter
    document.getElementById("counter").innerText = format;

    if(ss >= 45){
        counter.style.color = "red"
    }
    if (mm == 1 && ss == 0) {
    // Verifica se passou 1 minuto
    clearInterval(cron); // Para o temporizador
    finalizarGame(); // Chama a fun√ß√£o a ser executada ap√≥s 1 minuto
    }


    //Retorna o valor tratado
    return format;

  }

  ///////////////////////////////////logica da valida√ß√£o de personagem

  var lista_personagens = [
        "Luke Skywalker",
        "Leia Organa",
        "Princesa Leia",
        "Han Solo",
        "Chewbacca",
        "Darth Vader",
        "Obi-Wan Kenobi",
        "Yoda",
        "R2-D2",
        "C-3PO",
        "Imperador Palpatine",
        "Palpatine",
        "Boba Fett",
        "Lando Calrissian",
        "Anakin Skywalker",
        "Padm√© Amidala",
        "Mace Windu",
        "Qui-Gon Jinn",
        "Conde Dooku",
        "Rey",
        "Kylo Ren",
        "Finn",
        "Ackbar",
        "Jango Fett",
        "Wicket W. Warrick",
        "Jar Jar Binks"
];

var lista_personagem_user = []

  function incluir(){
    lista_user.innerHTML = ""
    
    var personagem_input = input_personagem.value


    if(personagem_input == ""){
        alert('Insira um personagem v√°lido!')
    } else{
         lista_personagem_user.push(personagem_input)
    }
   

    lista_user.innerHTML = `${lista_personagem_user}`

    input_personagem.value = ""
  }

  //variavel para contagem de pontos
  var pontos = 0

  function finalizarGame(){
    final_game.style.display = 'flex'
    game.style.display = 'none'

    for(var i = 0; i < lista_personagem_user.length; i++){
        if(lista_personagens.indexOf(lista_personagem_user[i]) > -1){
            pontos++
        }
    }

    if(pontos == 0){
        result.innerHTML = `Sua pontua√ß√£o foi ${pontos} pontos! <br>
            N√£o sabe nada mesmo! üòí
        `
    } else if(pontos <= 5){
        result.innerHTML = `Sua pontua√ß√£o foi ${pontos} pontos! <br>
            D√° pra melhorar bastante! ü§∑
        `
    } else if(pontos <=7){
        result.innerHTML = `Sua pontua√ß√£o foi ${pontos} pontos! <br>
            At√© que voc√™ sabe um pouco! üòÅ
        `
    } else if(pontos <= 10){
        result.innerHTML = `Sua pontua√ß√£o foi ${pontos} pontos! <br>
            Voc√™ conhece bastante at√©! üòØ
        `
    } else{
        result.innerHTML = `Sua pontua√ß√£o foi ${pontos} pontos! <br>
            Sem palavras, arrasou! üéâ
        `
    }
    
}
</script>
